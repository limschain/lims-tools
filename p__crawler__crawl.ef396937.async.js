(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"27f4":function(e,t,n){"use strict";var a=n("tAuX"),r=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("y8nQ");var l=r(n("Vl3Y"));n("2qtc");var o=r(n("kLXV")),i=r(n("2Taf")),c=r(n("vZ4D")),s=r(n("l4Ni")),u=r(n("ujKo")),d=r(n("MhPg"));n("OaEy");var p=r(n("2fM7")),f=a(n("q1tI")),m=r(n("DOfs")),y=r(n("wCAj")),h=n("c+yx"),v=p.default.Option,w=["title","date","summary","desc","content","mobiContent","author","source","keyword","browserTitle","flag","link","pictureId","headPictureId","views","groupIds"],b=function(e){function t(e){var n;return(0,i.default)(this,t),n=(0,s.default)(this,(0,u.default)(t).call(this,e)),n.crawlFieldsToTargetFields={},n.importItemRevert={},n.formLayout={labelCol:{span:7},wrapperCol:{span:13}},n.handleSubmit=function(){var e=n.props,t=e.handleImport,a=e.handleImportModalVisible,r=(0,h.invertKeyValues)(n.importItemRevert);t(r),a()},n.handleSelect=function(e,t){n.crawlFieldsToTargetFields[t.name]=e,n.importItemRevert[t.value]=e},n.columns=[{title:"\u6293\u53d6\u5b57\u6bb5\u540d",dataIndex:"name",width:150},{title:"\u6293\u53d6\u5b57\u6bb5\u503c",dataIndex:"value",width:150,render:function(e){return e&&e.length>200?"\u5185\u5bb9\u592a\u957f\uff0c\u6682\u65f6\u9690\u85cf":e}},{title:"\u5bfc\u5165\u5b57\u6bb5\u540d",width:200,render:function(e){return f.default.createElement(p.default,{size:"small",placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},onChange:function(t){return n.handleSelect(t,e)}},w.map(function(e){return f.default.createElement(v,{key:e},e)}))}}],n.state={loading:!1},n}return(0,d.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.importModalVisible,n=e.handleImportModalVisible,a=e.record,r={okText:"\u5bfc\u5165",onOk:this.handleSubmit,onCancel:function(){return n(!1,a)}},l=this.getDataSource(a);return f.default.createElement(o.default,Object.assign({title:"\u6587\u7ae0\u5bfc\u5165",className:m.default.standardListForm,width:640,bodyStyle:{padding:"28px 0 0"},destroyOnClose:!0,visible:t},r),f.default.createElement(y.default,{columns:this.columns,dataSource:l,pagination:!1}))}},{key:"getDataSource",value:function(e){var t=[],n=Object.keys(e);return n.forEach(function(n,a){t.push({key:a,name:n,value:e[n]})}),t}}]),t}(f.PureComponent),g=l.default.create()(b);t.default=g},DOfs:function(e,t,n){e.exports={standardList:"antd-pro-pages-crawler-crawl-components-style-standardList",headerInfo:"antd-pro-pages-crawler-crawl-components-style-headerInfo",listContent:"antd-pro-pages-crawler-crawl-components-style-listContent",listContentItem:"antd-pro-pages-crawler-crawl-components-style-listContentItem",extraContentSearch:"antd-pro-pages-crawler-crawl-components-style-extraContentSearch",listCard:"antd-pro-pages-crawler-crawl-components-style-listCard",standardListForm:"antd-pro-pages-crawler-crawl-components-style-standardListForm",formResult:"antd-pro-pages-crawler-crawl-components-style-formResult"}},Uymn:function(e,t,n){e.exports={main:"antd-pro-pages-crawler-crawl-style-main",headerList:"antd-pro-pages-crawler-crawl-style-headerList",tabsCard:"antd-pro-pages-crawler-crawl-style-tabsCard",noData:"antd-pro-pages-crawler-crawl-style-noData",heading:"antd-pro-pages-crawler-crawl-style-heading",stepDescription:"antd-pro-pages-crawler-crawl-style-stepDescription",textSecondary:"antd-pro-pages-crawler-crawl-style-textSecondary"}},bP8k:function(e,t,n){"use strict";n.r(t);n("cIOH"),n("jhiw")},"c+yx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invertKeyValues=t.isUrl=t.isAntDesignPro=t.isAntDesignProOrDev=void 0;var a=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/,r=function(e){return a.test(e)};t.isUrl=r;var l=function(){return"preview.pro.ant.design"===window.location.hostname};t.isAntDesignPro=l;var o=function(){var e="production";return"development"===e||l()};t.isAntDesignProOrDev=o;var i=function(e){return Object.keys(e).reduce(function(t,n){return t[e[n]]=n,t},{})};t.invertKeyValues=i},gFTJ:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n("TSYQ"),l=n.n(r),o=n("6CfX"),i=n("ACnJ"),c=n("wEI+");function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function f(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function w(e){return E(e)||g(e)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function E(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){var t=e.children;return t},k=function(e,t){var n=[],r=[],l=0;return a["Children"].forEach(e,function(e){r.push(e),e.props.span?l+=e.props.span:l+=1,l>=t&&(Object(o["a"])(l<=t,"Descriptions","Sum of column `span` in a line exceeds `column` of Descriptions."),n.push(r),r=[],l=0)}),r.length>0&&(n.push(r),r=[]),n},x=function(e,t){var n=e.props,r=n.prefixCls,o=n.label,i=n.className,c=n.children,s=n.span,u=void 0===s?1:s;return t?[a["createElement"]("th",{className:l()("".concat(r,"-item-label"),i,C({},"".concat(r,"-item-no-label"),!o)),key:"label"},o),a["createElement"]("td",{className:l()("".concat(r,"-item-content"),i),key:"content",colSpan:2*u-1},c)]:a["createElement"]("td",{colSpan:u,className:l()("".concat(r,"-item"),i)},a["createElement"]("span",{className:l()("".concat(r,"-item-label"),C({},"".concat(r,"-item-no-label"),!o)),key:"label"},o),a["createElement"]("span",{className:"".concat(r,"-item-content"),key:"content"},c))},D=function(e,t){var n=e.props,r=n.prefixCls,l=n.label,o=n.span,i=void 0===o?1:o;return t?a["createElement"]("td",{className:"".concat(r,"-item-label"),key:"label",colSpan:2*i-1},l):a["createElement"]("td",{colSpan:i,className:"".concat(r,"-item")},a["createElement"]("span",{className:"".concat(r,"-item-label"),key:"label"},l))},I=function(e,t){var n=e.props,r=n.prefixCls,l=n.children,o=n.span,i=void 0===o?1:o;return t?a["createElement"]("td",{className:"".concat(r,"-item-content"),key:"content",colSpan:2*i-1},l):a["createElement"]("td",{colSpan:i,className:"".concat(r,"-item")},a["createElement"]("span",{className:"".concat(r,"-item-content"),key:"content"},l))},O=function(e,t,n,r,l){var o=n.prefixCls,i=n.column,c=n.isLast,s=w(e),u=s.pop(),d=i-s.length;if(c&&(u=a["cloneElement"](u,{span:d})),"vertical"===l){var p=a["Children"].map(s,function(e){return D(e,r)}),f=a["Children"].map(s,function(e){return I(e,r)});return[a["createElement"]("tr",{className:"".concat(o,"-row"),key:"label-".concat(t)},p,D(u,r)),a["createElement"]("tr",{className:"".concat(o,"-row"),key:"content-".concat(t)},f,I(u,r))]}var m=a["Children"].map(s,function(e){return x(e,r)});return a["createElement"]("tr",{className:"".concat(o,"-row"),key:t},m,x(u,r))},j={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},N=function(e){function t(){var e;return u(this,t),e=f(this,y(t).apply(this,arguments)),e.state={screens:{}},e}return h(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.column;this.token=i["a"].subscribe(function(n){"object"===s(t)&&e.setState({screens:n})})}},{key:"componentWillUnmount",value:function(){i["a"].unsubscribe(this.token)}},{key:"getColumn",value:function(){var e=this.props.column;if("object"===s(e))for(var t=0;t<i["b"].length;t++){var n=i["b"][t];if(this.state.screens[n]&&void 0!==e[n])return e[n]||j[n]}return"number"===typeof e?e:3}},{key:"render",value:function(){var e=this;return a["createElement"](c["a"],null,function(t){var n,r=t.getPrefixCls,o=e.props,i=o.className,c=o.prefixCls,s=o.title,u=o.size,d=o.children,p=o.bordered,f=void 0!==p&&p,m=o.layout,y=void 0===m?"horizontal":m,h=r("descriptions",c),v=e.getColumn(),w=a["Children"].map(d,function(e){return a["isValidElement"](e)?a["cloneElement"](e,{prefixCls:h}):e}),b=k(w,v);return a["createElement"]("div",{className:l()(h,i,(n={},C(n,"".concat(h,"-").concat(u),"default"!==u),C(n,"".concat(h,"-bordered"),!!f),n))},s&&a["createElement"]("div",{className:"".concat(h,"-title")},s),a["createElement"]("div",{className:"".concat(h,"-view")},a["createElement"]("table",null,a["createElement"]("tbody",null,b.map(function(e,t){return O(e,t,{prefixCls:h,column:v,isLast:t+1===b.length},f,y)})))))})}}]),t}(a["Component"]);N.defaultProps={size:"default",column:j},N.Item=S,t["default"]=N},jhiw:function(e,t,n){e.exports={"ant-descriptions-title":"ant-descriptions-title","ant-descriptions-view":"ant-descriptions-view","ant-descriptions-row":"ant-descriptions-row","ant-descriptions-item-label":"ant-descriptions-item-label","ant-descriptions-item-no-label":"ant-descriptions-item-no-label","ant-descriptions-item-content":"ant-descriptions-item-content","ant-descriptions-item":"ant-descriptions-item","ant-descriptions-bordered":"ant-descriptions-bordered","ant-descriptions-middle":"ant-descriptions-middle","ant-descriptions-small":"ant-descriptions-small"}},"n/4D":function(e,t,n){"use strict";var a=n("tAuX"),r=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("g9YV");var l=r(n("wCAj"));n("IzEo");var o=r(n("bx4M"));n("jCWc");var i=r(n("kPKH"));n("14J3");var c=r(n("BMrR"));n("Pwec");var s=r(n("CtXQ"));n("miYZ");var u=r(n("tsqr")),d=r(n("2Taf")),p=r(n("vZ4D")),f=r(n("l4Ni")),m=r(n("ujKo")),y=r(n("MhPg"));n("Q9mQ");var h=r(n("diRs"));n("bP8k");var v=r(n("gFTJ"));n("FJo9");var w=r(n("L41K")),b=n("y1Nh"),g=a(n("q1tI")),E=r(n("TSYQ")),C=n("MuoO"),S=r(n("Uymn")),k=r(n("27f4")),x=function(e,t,n,a){var r,l=arguments.length,o=l<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(l<3?r(o):l>3?r(t,n,o):r(t,n))||o);return l>3&&o&&Object.defineProperty(t,n,o),o},D=w.default.Step,I=function(){return window.innerWidth||document.documentElement.clientWidth};function O(e){return g.default.createElement(v.default,{className:S.default.headerList,size:"small",column:3},g.default.createElement(v.default.Item,{label:"\u89c4\u5219\u540d\u79f0"},e.name),g.default.createElement(v.default.Item,{label:"\u89c4\u5219\u63cf\u8ff0"},e.desc))}var j={0:"\u89c4\u5219\u7ba1\u7406\u4e2d...",1:"\b\u722c\u53d6\u4e2d...",2:"\u5bfc\u5165\u4e2d...",3:"\u5b8c\u6210\uff01"},N=g.default.createElement("div",{style:{width:160}},g.default.createElement("div",{className:S.default.textSecondary,style:{marginTop:4}},"\u8017\u65f6\uff1a2\u5c0f\u65f625\u5206\u949f")),P=function(e,t){var n=t.status;return"process"===n?g.default.createElement(h.default,{placement:"topLeft",arrowPointAtCenter:!0,content:N},e):e},M=function(e){function t(){var e;return(0,d.default)(this,t),e=(0,f.default)(this,(0,m.default)(t).apply(this,arguments)),e.state={stepDirection:"horizontal",currentStep:0,importModalVisible:!1,recordValue:[]},e.setStepDirection=function(){var t=e.state.stepDirection,n=I();"vertical"!==t&&n<=576?e.setState({stepDirection:"vertical"}):"horizontal"!==t&&n>576&&e.setState({stepDirection:"horizontal"})},e.handleCrawle=function(){var t=e.props,n=t.dispatch,a=t.crawlerCrawl;n({type:"crawlerCrawl/crawl",payload:{rule:a.rule}}),e.setState({currentStep:2})},e.handleImport=function(t){var n=e.props,a=n.dispatch,r=n.crawlerCrawl;a({type:"crawlerCrawl/importPost",payload:{item:t}}),e.setState({currentStep:3}),u.default.success("\u5bfc\u5165\u5b8c\u6210\uff01"+r.importMsg)},e.handleImportModalVisible=function(t,n){e.setState({importModalVisible:!!t,recordValue:n})},e.desc1=g.default.createElement("div",{className:(0,E.default)(S.default.textSecondary,S.default.stepDescription)},g.default.createElement(g.Fragment,null,g.default.createElement(s.default,{type:"eye",style:{marginLeft:8}}),g.default.createElement("a",{onClick:e.handleCrawle},"\u67e5\u770b"),g.default.createElement(s.default,{type:"edit",style:{marginLeft:8}}),g.default.createElement("a",null,"\u4fee\u6539"),g.default.createElement(s.default,{type:"file",style:{marginLeft:8}}),g.default.createElement("a",null,"\u65b0\u5efa"))),e.desc2=g.default.createElement("div",{className:S.default.stepDescription},g.default.createElement(g.Fragment,null,g.default.createElement(s.default,{type:"bug",style:{color:"#00A0E9",marginLeft:8}}),g.default.createElement("a",{onClick:e.handleCrawle},"\b\u722c\u53d6"))),e.importDesc=g.default.createElement("div",{className:S.default.stepDescription},g.default.createElement(g.Fragment,null,g.default.createElement(s.default,{type:"download",style:{color:"#00A0E9",marginLeft:8}}),g.default.createElement("a",{onClick:e.handleCrawle},"\u5168\u90e8\u5bfc\u5165")),g.default.createElement("div",null,"\u5355\u72ec\u5bfc\u5165\uff0c\u8bf7\u4ece\u5217\u8868\u4e2d\u9009\u62e9\u64cd\u4f5c")),e.columns=function(t){var n=[];if(t&&t.options.length>0){var a=JSON.parse(t.options);a.forEach(function(e,t){["startSelect","paginate","limit","item"].includes(e.field)||(0===t?n.push({title:e.field,dataIndex:e.field,key:e.field,width:120,fixed:"left"}):n.push({title:e.field,dataIndex:e.field,key:e.field,render:function(e){return e&&e.length>200?(console.log("===================================="),console.log(e),console.log("===================================="),"\u5185\u5bb9\u592a\u957f\uff0c\u6682\u65f6\u9690\u85cf"):e}}))})}return n.push({title:"\u64cd\u4f5c",key:"operation",fixed:"right",width:100,render:function(t,n){return g.default.createElement("a",{href:"javascript:;",onClick:function(t){return e.handleImportModalVisible(!0,n)}},"\u5bfc\u5165")}}),n},e}return(0,y.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match;t({type:"crawlerCrawl/fetchRuleById",payload:n.params}),this.setStepDirection(),window.addEventListener("resize",this.setStepDirection,{passive:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setStepDirection)}},{key:"render",value:function(){var e=this.state,t=e.stepDirection,n=e.currentStep,a=e.importModalVisible,r=e.recordValue,s=this.props,u=s.crawlerCrawl,d=s.loading,p=g.default.createElement(c.default,{style:{minWidth:400}},g.default.createElement(i.default,{xs:24,sm:12},g.default.createElement("div",{className:S.default.textSecondary},"\u5f53\u524d\u72b6\u6001\uff1a",j[n]))),f={handleImportModalVisible:this.handleImportModalVisible,handleImport:this.handleImport};return g.default.createElement(b.PageHeaderWrapper,{title:"\b\u722c\u53d6\u89c4\u5219",content:O(u.rule),extraContent:p,tabActiveKey:"detail",tabList:[{key:"detail",tab:"\u8be6\u60c5"}]},g.default.createElement("div",{style:{margin:24,marginTop:48},className:S.default.main},g.default.createElement(b.GridContent,null,g.default.createElement(o.default,{title:"\u64cd\u4f5c\u6d41\u7a0b",style:{marginBottom:24}},g.default.createElement(w.default,{direction:t,progressDot:P,current:n},g.default.createElement(D,{title:"\u89c4\u5219",description:this.desc1}),g.default.createElement(D,{title:"\b\u722c\u53d6",description:this.desc2}),g.default.createElement(D,{title:"\u5bfc\u5165",description:this.importDesc}),g.default.createElement(D,{title:"\u5b8c\u6210"}))),g.default.createElement(o.default,{title:"\b\u722c\u53d6\u7ed3\u679c",style:{marginBottom:24}},g.default.createElement(l.default,{loading:d,dataSource:u.data,columns:this.columns(u.rule),scroll:{x:1300}})))),a&&g.default.createElement(k.default,Object.assign({},f,{importModalVisible:a,record:r})))}}]),t}(g.Component);M=x([(0,C.connect)(function(e){var t=e.crawlerCrawl,n=e.loading;return{crawlerCrawl:t,loading:n.effects["crawlerCrawl/fetchRuleById\b"]}})],M);var L=M;t.default=L}}]);